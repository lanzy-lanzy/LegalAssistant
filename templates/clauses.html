{% extends 'base.html' %}
{% block content %}
<div class="animate-fade-in space-y-10" x-data="{ 
    search: '', 
    categories: ['All', 'Liability', 'IP', 'Confidentiality', 'Termination', 'Employment'],
    activeCategory: 'All',
    clauses: [
        { id: 1, title: 'Mutual Confidentiality', category: 'Confidentiality', content: 'Each party agrees to maintain the secrecy of the other party\'s Confidential Information and not to use such information for any purpose other than performing its obligations under this Agreement.' },
        { id: 2, title: 'License Grant', category: 'IP', content: 'Subject to the terms and conditions of this Agreement, Licensor hereby grants to Licensee a non-exclusive, non-transferable, worldwide license to use the Software during the Term.' },
        { id: 3, title: 'Limitation of Liability (Standard)', category: 'Liability', content: 'In no event shall either party be liable for any indirect, incidental, special, or consequential damages, even if advised of the possibility of such damages.' },
        { id: 4, title: 'Severability', category: 'General', content: 'If any provision of this Agreement is held to be invalid or unenforceable, the remaining provisions shall continue in full force and effect.' }
    ],
    get filteredClauses() {
        return this.clauses.filter(c => {
            const matchesSearch = c.title.toLowerCase().includes(this.search.toLowerCase()) || c.content.toLowerCase().includes(this.search.toLowerCase());
            const matchesCategory = this.activeCategory === 'All' || c.category === this.activeCategory;
            return matchesSearch && matchesCategory;
        });
    }
}">
    <header class="flex justify-between items-end border-b border-white/5 pb-8">
        <div>
            <h1 class="text-3xl font-bold tracking-tight mb-2 text-white">Clause Library</h1>
            <p class="text-slate-400">Standardized legal building blocks optimized by AI.</p>
        </div>
        <div class="flex gap-2">
            <div class="px-4 py-2 bg-indigo-500/10 rounded-lg border border-indigo-500/20 text-indigo-400 text-xs font-bold font-mono">
                <span x-text="filteredClauses.length"></span> CLAUSES MATCHED
            </div>
        </div>
    </header>

    <div class="flex flex-col lg:flex-row gap-6 items-center">
        <div class="flex-1 w-full">
            <div class="relative group">
                <i class="fa-solid fa-magnifying-glass absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-indigo-400 transition-colors"></i>
                <input 
                    type="text" 
                    x-model="search" 
                    placeholder="Search library by principle or keyword..." 
                    class="w-full bg-white/2 border border-white/10 rounded-2xl py-4 pl-14 pr-6 text-slate-200 outline-none focus:border-indigo-500/50 focus:bg-white/5 transition-all"
                >
            </div>
        </div>
        <div class="flex gap-2 overflow-x-auto w-full lg:w-auto pb-2 lg:pb-0 scrollbar-hide">
            <template x-for="cat in categories">
                <button 
                    @click="activeCategory = cat" 
                    class="px-5 py-2.5 rounded-xl text-xs font-bold transition-all whitespace-nowrap border"
                    :class="activeCategory === cat ? 'bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-500/20' : 'bg-white/2 border-white/5 text-slate-500 hover:text-slate-300 hover:bg-white/5'"
                    x-text="cat"
                ></button>
            </template>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
        <template x-for="clause in filteredClauses" :key="clause.id">
            <div class="glass p-6 flex flex-col hover:border-indigo-500/30 transition-all group">
                <div class="flex justify-between items-start mb-6">
                    <div class="p-2.5 bg-indigo-500/10 rounded-lg group-hover:bg-indigo-500/20 transition-colors">
                        <i class="fa-solid fa-file-signature text-indigo-400"></i>
                    </div>
                    <span class="text-[10px] font-black font-mono px-2 py-1 bg-white/5 text-slate-500 rounded uppercase tracking-tighter" x-text="clause.category"></span>
                </div>
                <h3 class="font-bold text-lg mb-4 text-white group-hover:text-indigo-300 transition-colors" x-text="clause.title"></h3>
                <p class="text-sm text-slate-400 mb-8 line-clamp-4 leading-relaxed italic" x-text="clause.content"></p>
                <div class="mt-auto flex gap-3 pt-6 border-t border-white/5">
                    <button class="flex-1 py-2.5 rounded-lg bg-white/5 text-slate-300 text-xs font-bold hover:bg-white/10 transition-all flex items-center justify-center gap-2" @click="$dispatch('notify', 'Clause copied!')">
                        <i class="fa-solid fa-copy opacity-50"></i> Copy
                    </button>
                    <button class="w-10 h-10 rounded-lg border border-white/5 flex items-center justify-center text-slate-500 hover:bg-indigo-600 hover:text-white transition-all shadow-xl">
                        <i class="fa-solid fa-wand-magic-sparkles text-xs"></i>
                    </button>
                </div>
            </div>
        </template>

        <!-- AI Generator Card -->
        <div class="glass p-8 border-dashed border-2 border-indigo-500/20 flex flex-col items-center justify-center text-center bg-indigo-500/2 hover:bg-indigo-500/5 transition-all cursor-pointer group">
            <div class="w-16 h-16 rounded-3xl bg-indigo-600 flex items-center justify-center mb-6 text-white shadow-2xl shadow-indigo-500/40 group-hover:scale-110 transition-transform">
                <i class="fa-solid fa-plus text-2xl"></i>
            </div>
            <h3 class="font-bold text-white mb-2">AI Clause Drafter</h3>
            <p class="text-sm text-slate-500 mb-8 max-w-[200px]">Prompt our AI to generate a custom legal clause instantly.</p>
            <button class="px-6 py-2.5 rounded-xl border border-indigo-500/30 text-indigo-400 text-xs font-bold hover:bg-indigo-600 hover:text-white hover:border-indigo-600 transition-all">
                Launch Generator
            </button>
        </div>
    </div>
</div>
{% endblock content %}

